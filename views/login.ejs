<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录页面</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0"/>
    <style>
        * {margin:0;padding:0}
        body,html{
            width:100%;
            height:100%;
            overflow:hidden;
        }
        div {
            margin:0;
            padding:0;
            box-sizing:border-box;
            margin:0 auto;
        }
        .top {
            position:fixed;
            top:0;
            left:0;
            width:100%;
            text-align:center;
            font-size:30px;
            font-weight:400;
            color: white;
            background: #73accc;
        }
        .content {
            width:100%;
            padding-top:180px;
            height:100%;
            overflow: auto;
        }
        .content .login {
            width:80%;
            height:30%;
            border:1px solid red;
            padding-top:30px;
            text-align:center;
        }
        .content input {
            width:70%;
            height:30px;
            border-radius:8px;
            border:1px solid #ccc;
            outline:none;
            padding-left:5px;
        }
        .content label {
            padding:0 5px;
        }
        .content botton {
            display:block;
            padding-top:10px;
        }
    </style>
</head>
<body>
<div class="top">登录</div>
<div class="content">
    <div class="login">
        <label for="nameId">输入昵称 :</label><input type="text" name="" id="nameId"/>
        <botton>提交</botton>
    </div>
</div>
</body>
</html>
<script>
    var botton = document.querySelector("botton");
    botton.addEventListener("click",function(e){
        e.preventDefault();
        var username = document.querySelector("#nameId").value;
        if(!!username){
            var xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function(){
                if(xmlhttp.readyState==4 && xmlhttp.status==200){
                     var i = xmlhttp.responseText;
                     if(i == "-1"){
                         alert("昵称被占用");
                     }else if(i == "1"){
                         window.location.href = "/chat";
                     }
                }
            }
            xmlhttp.open("GET","/dologin?username="+username,true)
            xmlhttp.send(null);
        }else{
            alert("昵称不能为空");
        }
    })
</script>